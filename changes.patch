diff --git a/changes.patch b/changes.patch
index 2f5a43e..e69de29 100644
--- a/changes.patch
+++ b/changes.patch
@@ -1,252 +0,0 @@
-diff --git a/changes.patch b/changes.patch
-index b321a39..e69de29 100644
---- a/changes.patch
-+++ b/changes.patch
-@@ -1,196 +0,0 @@
--diff --git a/resolver/noop_engine.go b/resolver/noop_engine.go
--new file mode 100644
--index 0000000..46e74ac
----- /dev/null
--+++ b/resolver/noop_engine.go
--@@ -0,0 +1,40 @@
--+package resolver
--+
--+import "tmux-fsm/intent"
--+
--+// NoopEngine 空操作引擎实现
--+type NoopEngine struct{}
--+
--+func (n *NoopEngine) SendKeys(keys ...string) {}
--+
--+func (n *NoopEngine) GetVisualMode() intent.VisualMode {
--+	return intent.VisualModeNormal
--+}
--+
--+func (n *NoopEngine) EnterVisualMode(mode intent.VisualMode) {}
--+
--+func (n *NoopEngine) ExitVisualMode() {}
--+
--+func (n *NoopEngine) GetCurrentCursor() ResolverCursor {
--+	return ResolverCursor{}
--+}
--+
--+func (n *NoopEngine) ComputeMotion(m *intent.Motion) (ResolverRange, error) {
--+	return ResolverRange{}, nil
--+}
--+
--+func (n *NoopEngine) MoveCursor(r ResolverRange) error {
--+	return nil
--+}
--+
--+func (n *NoopEngine) DeleteRange(r ResolverRange) error {
--+	return nil
--+}
--+
--+func (n *NoopEngine) YankRange(r ResolverRange) error {
--+	return nil
--+}
--+
--+func (n *NoopEngine) ChangeRange(r ResolverRange) error {
--+	return nil
--+}
--\ No newline at end of file
--diff --git a/resolver/resolver.go b/resolver/resolver.go
--index d4d2d44..04b59f1 100644
----- a/resolver/resolver.go
--+++ b/resolver/resolver.go
--@@ -5,13 +5,6 @@ import (
-- 	"tmux-fsm/intent"
-- )
-- 
---// ExecContext 执行上下文
---type ExecContext struct {
---	FromRepeat bool // 是否来自重复操作
---	FromMacro  bool // 是否来自宏
---	FromUndo   bool // 是否来自撤销操作
---}
---
-- // RepeatableAction 可重复操作
-- type RepeatableAction struct {
-- 	Operator *intent.OperatorKind
--@@ -31,9 +24,9 @@ type Resolver struct {
-- }
-- 
-- // New 创建新的解析器
---func New(engine EngineAdapter) *Resolver {
--+func New(_ EngineAdapter) *Resolver {
-- 	return &Resolver{
---		engine: engine,
--+		engine: &NoopEngine{},
-- 	}
-- }
-- 
--diff --git a/resolver/selection.go b/resolver/selection.go
--deleted file mode 100644
--index 5f88e5a..0000000
----- a/resolver/selection.go
--+++ /dev/null
--@@ -1,10 +0,0 @@
---package resolver
---
---// SelectionMode 选择模式
---type SelectionMode int
---
---const (
---	SelectionChar SelectionMode = iota
---	SelectionLine
---	SelectionBlock
---)
--\ No newline at end of file
--diff --git a/resolver/semantic_action.go b/resolver/semantic_action.go
--deleted file mode 100644
--index 9709b07..0000000
----- a/resolver/semantic_action.go
--+++ /dev/null
--@@ -1,36 +0,0 @@
---package resolver
---
---import (
---	"tmux-fsm/intent"
---)
---
---// SemanticAction 语义动作，代表意图的语义表示
---type SemanticAction struct {
---	Operator  intent.OperatorKind
---	Selection *Selection
---	Motion    intent.MotionKind
---	Target    intent.TargetKind
---	Count     int
---}
---
---// ActionType 语义动作类型
---type ActionType int
---
---const (
---	ActionMove ActionType = iota
---	ActionDelete
---	ActionYank
---	ActionChange
---	ActionVisual
---	ActionUndo
---	ActionRepeat
---	ActionMacro
---)
---
---// Action 代表一个具体的语义动作
---type Action struct {
---	Type        ActionType
---	Semantic    *SemanticAction
---	RawIntent   *intent.Intent
---	Description string
---}
--\ No newline at end of file
--diff --git a/resolver/visual.go b/resolver/visual.go
--deleted file mode 100644
--index c904626..0000000
----- a/resolver/visual.go
--+++ /dev/null
--@@ -1,52 +0,0 @@
---package resolver
---
---import "tmux-fsm/intent"
---
---// handleVisualMode 处理视觉模式切换
---func (r *Resolver) handleVisualMode(i *intent.Intent) error {
---	if i.Kind == intent.IntentVisual {
---		// 使用 Target.Scope 来判断操作
---		switch i.Target.Scope {
---		case "char":
---			return r.EnterVisual(SelectionChar)
---		case "line":
---			return r.EnterVisual(SelectionLine)
---		case "block":
---			return r.EnterVisual(SelectionBlock)
---		case "cancel":
---			return r.ExitVisual()
---		}
---	}
---	return nil
---}
---
---// resolveEnterVisual 解析进入视觉模式意图
---func (r *Resolver) resolveEnterVisual(i *intent.Intent) error {
---	// 通过 Target.Scope 来判断模式
---	switch i.Target.Scope {
---	case "char":
---		return r.EnterVisual(SelectionChar)
---	case "line":
---		return r.EnterVisual(SelectionLine)
---	case "block":
---		return r.EnterVisual(SelectionBlock)
---	}
---	return nil
---}
---
---// resolveExitVisual 解析退出视觉模式意图
---func (r *Resolver) resolveExitVisual(i *intent.Intent) error {
---	return r.ExitVisual()
---}
---
---// EnterVisual 进入视觉模式
---func (r *Resolver) EnterVisual(mode SelectionMode) error {
---	r.engine.EnterVisualMode(intent.VisualMode(mode))
---	return nil
---}
---
---// ExitVisual 退出视觉模式
---func (r *Resolver) ExitVisual() error {
---	r.engine.ExitVisualMode()
---	return nil
---}
--\ No newline at end of file
-diff --git a/main.go b/main.go
-index 49671fb..77764f0 100644
---- a/main.go
-+++ b/main.go
-@@ -77,8 +77,15 @@ func main() {
- 	// Initialize FSM engine with loaded keymap
- 	fsm.InitEngine(&fsm.KM)
- 
--	// Initialize kernel with FSM engine
--	kernelInstance = kernel.NewKernel(fsm.GetDefaultEngine(), nil) // Will set executor later
-+	// 初始化新的编辑内核组件
-+	cursorEngine := editor.NewCursorEngine(editor.NewSimpleBuffer()) // 创建光标引擎
-+	newResolver := editor.NewResolver(cursorEngine)                  // 创建新的解析器
-+
-+	// 创建基于新解析器的执行器
-+	resolverExecutor := kernel.NewResolverExecutor(newResolver)
-+
-+	// Initialize kernel with FSM engine and new resolver executor
-+	kernelInstance = kernel.NewKernel(fsm.GetDefaultEngine(), resolverExecutor)
- 
- 	// 初始化 Weaver 系统
- 	manager.InitWeaver(manager.ModeWeaver) // 默认启用 Weaver 模式
-diff --git a/resolver/noop_engine.go b/resolver/noop_engine.go
-index d3aec9a..ab5460c 100644
---- a/resolver/noop_engine.go
-+++ b/resolver/noop_engine.go
-@@ -3,6 +3,10 @@ package resolver
- import "tmux-fsm/intent"
- 
- // NoopEngine 空操作引擎实现
-+//
-+// TEMP: bootstrap phase - 过渡期临时实现
-+// 此实现不执行任何实际操作，仅用于架构迁移期间的接口兼容
-+// 最终将被替换为实际的CursorEngine实现
- type NoopEngine struct{}
- 
- func (n *NoopEngine) SendKeys(keys ...string) {}
-diff --git a/resolver/resolver.go b/resolver/resolver.go
-index 178d696..f0016e0 100644
---- a/resolver/resolver.go
-+++ b/resolver/resolver.go
-@@ -1,3 +1,9 @@
-+// Package resolver - DEPRECATED: 冻结状态，不再开发
-+//
-+// 此包已被标记为冻结状态，不再接受任何新功能开发。
-+// 所有新的Vim语义解析逻辑应使用 main 包中的新Resolver实现。
-+//
-+// 此包仅用于过渡期兼容，最终将被完全替换。
- package resolver
- 
- import (
diff --git a/main.go b/main.go
index 49671fb..513033a 100644
--- a/main.go
+++ b/main.go
@@ -25,18 +25,21 @@ var weaverMgr *manager.WeaverManager
 // kernelInstance 全局 Kernel 实例
 var kernelInstance *kernel.Kernel
 
+// transMgr 全局事务管理器
+var transMgr *TransactionManager
+
 // TransactionManager 事务管理器
 type TransactionManager struct {
-	current *Transaction
-	nextID  TransactionID
+	current *types.Transaction
+	nextID  types.TransactionID
 }
 
 // Append 向事务管理器追加记录
-func (tm *TransactionManager) Append(record ActionRecord) {
+func (tm *TransactionManager) Append(record types.OperationRecord) {
 	if tm.current == nil {
-		tm.current = &Transaction{
+		tm.current = &types.Transaction{
 			ID:        tm.nextID,
-			Records:   []ActionRecord{record},
+			Records:   []types.OperationRecord{record},
 			CreatedAt: time.Now(),
 			Applied:   false,
 			Skipped:   false,
@@ -77,8 +80,15 @@ func main() {
 	// Initialize FSM engine with loaded keymap
 	fsm.InitEngine(&fsm.KM)
 
-	// Initialize kernel with FSM engine
-	kernelInstance = kernel.NewKernel(fsm.GetDefaultEngine(), nil) // Will set executor later
+	// 初始化新的编辑内核组件
+	cursorEngine := editor.NewCursorEngine(editor.NewSimpleBuffer()) // 创建光标引擎
+	newResolver := editor.NewResolver(cursorEngine)                  // 创建新的解析器
+
+	// 创建基于新解析器的执行器
+	resolverExecutor := kernel.NewResolverExecutor(newResolver)
+
+	// Initialize kernel with FSM engine and new resolver executor
+	kernelInstance = kernel.NewKernel(fsm.GetDefaultEngine(), resolverExecutor)
 
 	// 初始化 Weaver 系统
 	manager.InitWeaver(manager.ModeWeaver) // 默认启用 Weaver 模式
diff --git a/resolver/noop_engine.go b/resolver/noop_engine.go
index d3aec9a..ab5460c 100644
--- a/resolver/noop_engine.go
+++ b/resolver/noop_engine.go
@@ -3,6 +3,10 @@ package resolver
 import "tmux-fsm/intent"
 
 // NoopEngine 空操作引擎实现
+//
+// TEMP: bootstrap phase - 过渡期临时实现
+// 此实现不执行任何实际操作，仅用于架构迁移期间的接口兼容
+// 最终将被替换为实际的CursorEngine实现
 type NoopEngine struct{}
 
 func (n *NoopEngine) SendKeys(keys ...string) {}
diff --git a/resolver/resolver.go b/resolver/resolver.go
index 178d696..f0016e0 100644
--- a/resolver/resolver.go
+++ b/resolver/resolver.go
@@ -1,3 +1,9 @@
+// Package resolver - DEPRECATED: 冻结状态，不再开发
+//
+// 此包已被标记为冻结状态，不再接受任何新功能开发。
+// 所有新的Vim语义解析逻辑应使用 main 包中的新Resolver实现。
+//
+// 此包仅用于过渡期兼容，最终将被完全替换。
 package resolver
 
 import (
diff --git a/types/types.go b/types/types.go
index 07f1bbe..41652be 100644
--- a/types/types.go
+++ b/types/types.go
@@ -3,26 +3,31 @@ package types
 import (
 	"time"
 	"tmux-fsm/weaver/core"
+	"tmux-fsm/editor"
 )
 
 // TransactionID 事务ID类型
 type TransactionID uint64
 
-// ActionRecord 动作记录
-type ActionRecord struct {
-	Fact    core.Fact `json:"fact"`
-	Inverse core.Fact `json:"inverse"`
+// OperationRecord 操作记录，基于ResolvedOperation
+type OperationRecord struct {
+	ResolvedOp editor.ResolvedOperation `json:"resolved_operation"`
+	Fact       core.Fact               `json:"fact"`
+	Inverse    core.Fact               `json:"inverse"`
 }
 
 // Transaction 事务
 // RFC-WC-003: Audit Trail - 所有编辑操作必须可追溯
+// 
+// 更新：现在使用ResolvedOperation作为核心操作表示
+// 这样可以更好地支持Vim语义的repeat/undo操作
 type Transaction struct {
-	ID               TransactionID  `json:"id"`
-	Records          []ActionRecord `json:"records"`
-	CreatedAt        time.Time      `json:"created_at"`
-	Applied          bool           `json:"applied"`
-	Skipped          bool           `json:"skipped"`
-	SafetyLevel      string         `json:"safety_level,omitempty"`       // exact, fuzzy
-	PreSnapshotHash  string         `json:"pre_snapshot_hash,omitempty"`  // Phase 8: World state before transaction
-	PostSnapshotHash string         `json:"post_snapshot_hash,omitempty"` // Phase 8: World state after transaction
+	ID               TransactionID      `json:"id"`
+	Records          []OperationRecord  `json:"records"`
+	CreatedAt        time.Time          `json:"created_at"`
+	Applied          bool               `json:"applied"`
+	Skipped          bool               `json:"skipped"`
+	SafetyLevel      string             `json:"safety_level,omitempty"`       // exact, fuzzy
+	PreSnapshotHash  string             `json:"pre_snapshot_hash,omitempty"`  // Phase 8: World state before transaction
+	PostSnapshotHash string             `json:"post_snapshot_hash,omitempty"` // Phase 8: World state after transaction
 }
\ No newline at end of file
